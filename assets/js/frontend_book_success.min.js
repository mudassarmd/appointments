$(document).ready(function(){function a(a){try{if(a.error)throw new Error("Could not authorize user.");var e=GlobalVariables.providerData,t=GlobalVariables.appointmentData,o={summary:GlobalVariables.serviceData.name,location:GlobalVariables.companyName,start:{dateTime:moment.tz(t.start_datetime,e.timezone).format()},end:{dateTime:moment.tz(t.end_datetime,e.timezone).format()},attendees:[{email:GlobalVariables.providerData.email,displayName:GlobalVariables.providerData.first_name+" "+GlobalVariables.providerData.last_name}]};gapi.client.load("calendar","v3",function(){gapi.client.calendar.events.insert({calendarId:"primary",resource:o}).execute(function(a){if(a.error)throw new Error("Could not add the event to Google Calendar.");$("#success-frame").append($("<br/>"),$("<div/>",{class:"alert alert-success col-xs-12",html:[$("<h4/>",{text:EALang.success}),$("<p/>",{text:EALang.appointment_added_to_google_calendar}),$("<a/>",{href:a.htmlLink,text:EALang.view_appointment_in_google_calendar})]})),$("#add-to-google-calendar").hide()})})}catch(a){$("#success-frame").append($("<br/>"),$("<div/>",{class:"alert alert-danger col-xs-12",html:[$("<h4/>",{text:EALang.oops_something_went_wrong}),$("<p/>",{text:EALang.could_not_add_to_google_calendar}),$("<pre/>",{text:a.message})]}))}}$("#add-to-google-calendar").on("click",function(){gapi.client.setApiKey(GlobalVariables.googleApiKey),gapi.auth.authorize({client_id:GlobalVariables.googleClientId,scope:GlobalVariables.googleApiScope,immediate:!1},a)}),console.log("API RESPONSE :: ",GlobalVariables.api_response),console.log("API DATA :: ",GlobalVariables.api_data)});