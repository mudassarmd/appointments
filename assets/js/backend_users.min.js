window.BackendUsers=window.BackendUsers||{},function(s){"use strict";s.MIN_PASSWORD_LENGTH=7;var t={};s.wp={},s.initialize=function(e){e=e||!0,s.wp=new WorkingPlan,s.wp.bindEventHandlers(),(t=new ProvidersHelper).resetForm(),t.filter(""),t.bindEventHandlers();var a='<table class="table table-bordered">';a+='<thead><tr><th scope="col">Select Subject</th><th scope="col">Subject</th><th scope="col">Price</th></tr></thead><tbody>';var r=0;GlobalVariables.services.forEach(function(e){r++,a+="<tr>",a+='<td><div class="custom-control custom-checkbox"><input type="checkbox" class="custom-control-input" data-id="'+e.id+'" disabled="disabled" id="customCheck'+e.id+'" checked>',a+='<label class="custom-control-label" for="customCheck'+e.id+'">'+r+"</label></div></td><td>"+e.name+'</td><td><input type="text" style="width:110px;" class="form-control" id="amount_'+e.id+'" value="" /> </td></tr>'}),a+="</tbody></table>",0!=r&&$("#provider-services").html(a),GlobalVariables.providers.forEach(function(e){$("<div/>",{class:"checkbox",html:[$("<div/>",{class:"checkbox form-check",html:[$("<input/>",{class:"form-check-input",type:"checkbox","data-id":e.id}),$("<label/>",{class:"form-check-label",text:e.first_name+" "+e.last_name,for:e.id})]})]}).appendTo("#secretary-providers")}),e&&($('#users-page > .nav-pills a[data-toggle="tab"]').on("shown.bs.tab",function(){var e,a;$(this).parents(".switch-view").length||(t&&t.unbindEventHandlers(),"#admins"===$(this).attr("href")?t=new AdminsHelper:"#providers"===$(this).attr("href")?t=new ProvidersHelper:"#secretaries"===$(this).attr("href")&&(t=new SecretariesHelper,e=GlobalVariables.baseUrl+"/index.php/backend_api/ajax_filter_providers",a={csrfToken:GlobalVariables.csrfToken,key:""},$.post(e,a).done(function(e){GlobalVariables.providers=e,$("#secretary-providers").empty(),GlobalVariables.providers.forEach(function(e){$("<div/>",{class:"checkbox",html:[$("<div/>",{class:"checkbox form-check",html:[$("<input/>",{class:"form-check-input",type:"checkbox","data-id":e.id,prop:{disabled:!0}}),$("<label/>",{class:"form-check-label",text:e.first_name+" "+e.last_name,for:e.id})]})]}).appendTo("#secretary-providers")})})),t.resetForm(),t.filter(""),t.bindEventHandlers(),$(".filter-key").val(""),Backend.placeFooterToBottom())}),$("#admin-username, #provider-username, #secretary-username").focusout(function(){var e,a,r,s=$(this);!0===s.prop("readonly")||""===s.val()||(e=s.parents().eq(2).find(".record-id").val())&&(a=GlobalVariables.baseUrl+"/index.php/backend_api/ajax_validate_username",r={csrfToken:GlobalVariables.csrfToken,username:s.val(),user_id:e},$.post(a,r).done(function(e){"false"===e?(s.closest(".form-group").addClass("has-error"),s.attr("already-exists","true"),s.parents().eq(3).find(".form-message").text(EALang.username_already_exists),s.parents().eq(3).find(".form-message").show()):(s.closest(".form-group").removeClass("has-error"),s.attr("already-exists","false"),s.parents().eq(3).find(".form-message").text()===EALang.username_already_exists&&s.parents().eq(3).find(".form-message").hide())}))}))}}(window.BackendUsers);